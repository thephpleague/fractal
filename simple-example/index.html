<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="icon" type="image/x-icon" href="/themes/thephpleague/thephpleague.github.com/img/favicon.ico" />
                <link rel="apple-touch-icon-precomposed" href="/themes/thephpleague/thephpleague.github.com/img/apple-touch-icon-precomposed.png">
                <title>Simple example - Fractal</title>
                <meta name="description" content="Fractal provides a presentation and transformation layer for complex data output, the like found in AJAX and RESTful APIs.">
                <link rel="stylesheet" href="/themes/thephpleague/thephpleague.github.com/css/all.css">
    </head>
<body>

<section class="all_packages">
    <a href="http://thephpleague.com/">
        <img src="/themes/thephpleague/thephpleague.github.com/img/loep_logo.png" width="195" height="200" alt="The League of Extraordinary Packages">
    </a>
    <h2>Our Packages:</h2>
    <ul>
    </ul>
</section>

<header>
    <a class="logo" href="/">
                <span class="name">Fractal</span>
        <span class="tagline">Output complex, flexible, AJAX/RESTful data structures.</span>
    </a>
    <a href="http://thephpleague.com/" class="league">
        Presented by The League of Extraordinary Packages
    </a>
</header>

<input type="checkbox" id="menu">
<label for="menu" onclick>
    <div class="closed">&#9776; Menu</div>
    <div class="open">&#9776; Hide Menu</div>
</label>

<main>
    <menu>
                    <h2>Getting Started</h2>
            <ul>
                                    <li >
                        <a href="/">Introduction</a>
                    </li>
                                    <li class="selected">
                        <a href="/simple-example/">Simple Example</a>
                    </li>
                                    <li >
                        <a href="/installation/">Installation</a>
                    </li>
                                    <li >
                        <a href="/glossary/">Glossary</a>
                    </li>
                            </ul>
                    <h2>Concepts</h2>
            <ul>
                                    <li >
                        <a href="/resources/">Resources</a>
                    </li>
                                    <li >
                        <a href="/serializers/">Serializers</a>
                    </li>
                                    <li >
                        <a href="/transformers/">Transformers</a>
                    </li>
                                    <li >
                        <a href="/pagination/">Pagination</a>
                    </li>
                            </ul>
            </menu>
    <article>
        <h1>Simple Example</h1>

<p>For the sake of simplicity, this example has been put together as though it was 
one file. In reality you would spread the manager initiation, data collection 
and JSON conversion into seperate parts of your application.</p>

<pre><code class="language-php">&lt;?php
use League\Fractal;

// Create a top level instance somewhere
$fractal = new Fractal\Manager();

// Get data from some sort of source
// Most PHP extensions for SQL engines return everything as a string, historically
// for performance reasons. We will fix this later, but this array represents that.
$books = [
    [
        'id' =&gt; "1",
        'title' =&gt; "Hogfather",
        'yr' =&gt; "1998",
        'author_name' =&gt; 'Philip K Dick',
        'author_email' =&gt; 'philip@example.org',
    ],
    [
        'id' =&gt; "2",
        'title' =&gt; "Game Of Kill Everyone",
        'yr' =&gt; "2014",
        'author_name' =&gt; 'George R. R. Satan',
        'author_email' =&gt; 'george@example.org',
    ]
];

// Pass this array (collection) into a resource, which will also have a "Transformer"
// This "Transformer" can be a callback or a new instance of a Transformer object
// We type hint for array, because each item in the $books var is an array
$resource = new Fractal\Resource\Collection($books, function(array $book) {
    return [
        'id'      =&gt; (int) $book['id'],
        'title'   =&gt; $book['title'],
        'year'    =&gt; (int) $book['yr'],
        'author'  =&gt; [
            'name'  =&gt; $book['author_name'],
            'email' =&gt; $book['author_email'],
        ],
        'links'   =&gt; [
            [
                'rel' =&gt; 'self',
                'uri' =&gt; '/books/'.$book-&gt;id,
            ]
        ]
    ];
});

// Turn that into a structured array (handy for XML views or auto-YAML converting)
$array = $fractal-&gt;createData($resource)-&gt;toArray();

// Turn all of that into a JSON string
echo $fractal-&gt;createData($resource)-&gt;toJson();

// Outputs: {"data":[{"id":1,"title":"Hogfather","year":1998,"author":{"name":"Philip K Dick","email":"philip@example.org"}},{"id":2,"title":"Game Of Kill Everyone","year":2014,"author":{"name":"George R. R. Satan","email":"george@example.org"}}]}
</code></pre>

<p>It is worth noting that callbacks are a fairly shoddy replacement for using real 
<a href="/transformers">Transformers</a>. They allow you to reuse transformers and keep your 
controllers lightweight.</p>
    </article>
</main>

<footer>
    <span>&copy; Copyright The League of Extraordinary Packages.</span>
    <span>Site design by <a href="http://reinink.ca">Jonathan Reinink</a>.</span>
    <span>Powered by <a href="https://sculpin.io">Sculpin</a>.</span>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="/themes/thephpleague/thephpleague.github.com/js/scripts.js"></script>
<script src="/themes/thephpleague/thephpleague.github.com/js/prism.js"></script>

    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-46050814-4');ga('send','pageview');
    </script>

</body>
</html>